{"remainingRequest":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/babel-loader/lib/index.js!/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/src/components/Auth.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/src/components/Auth.vue","mtime":1633644453571},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/vue-loader-v16/dist/index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2RoZWVyYWovRGVza3RvcC9zdXBhL3N1cGFiYXNlLWdlb2RiL3NiZ2VvZGIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IHJlZiB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAiLi4vc3VwYWJhc2UiOwppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlci9yb3V0ZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIGxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgdmFyIGVtYWlsID0gcmVmKCIiKTsKCiAgICB2YXIgaGFuZGxlTG9naW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3lpZWxkJHN1cGFiYXNlJGF1dGgkLCBlcnJvcjsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGFiYXNlLmF1dGguc2lnbkluKHsKICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLnZhbHVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX3lpZWxkJHN1cGFiYXNlJGF1dGgkID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGVycm9yID0gX3lpZWxkJHN1cGFiYXNlJGF1dGgkLmVycm9yOwoKICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IGVycm9yOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBhbGVydCgiQ2hlY2sgeW91ciBlbWFpbCBmb3IgdGhlIGxvZ2luIGxpbmshIik7CiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIHBhdGg6ICJsb2dpbiIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgYWxlcnQoX2NvbnRleHQudDAuZXJyb3JfZGVzY3JpcHRpb24gfHwgX2NvbnRleHQudDAubWVzc2FnZSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTU7CiAgICAgICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDE1KTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTIsIDE1LCAxOF1dKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUxvZ2luKCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogbG9hZGluZywKICAgICAgZW1haWw6IGVtYWlsLAogICAgICBoYW5kbGVMb2dpbjogaGFuZGxlTG9naW4KICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/src/components/Auth.vue"],"names":[],"mappings":";;AA6BA,SAAS,GAAT,QAAoB,KAApB;AACA,SAAS,QAAT,QAAyB,aAAzB;AACA,OAAO,MAAP,MAAmB,kBAAnB;AAEA,eAAe;AACb,EAAA,KADa,mBACL;AACN,QAAM,OAAM,GAAI,GAAG,CAAC,KAAD,CAAnB;AACA,QAAM,KAAI,GAAI,GAAG,CAAC,EAAD,CAAjB;;AAEA,QAAM,WAAU;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEhB,gBAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB;AAFgB;AAAA,uBAGQ,QAAQ,CAAC,IAAT,CAAc,MAAd,CAAqB;AAAE,kBAAA,KAAK,EAAE,KAAK,CAAC;AAAf,iBAArB,CAHR;;AAAA;AAAA;AAGR,gBAAA,KAHQ,yBAGR,KAHQ;;AAAA,qBAIZ,KAJY;AAAA;AAAA;AAAA;;AAAA,sBAIC,KAJD;;AAAA;AAKhB,gBAAA,KAAK,CAAC,sCAAD,CAAL;AACA,gBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,kBAAA,IAAI,EAAE;AAAR,iBAAZ;AANgB;AAAA;;AAAA;AAAA;AAAA;AAQhB,gBAAA,KAAK,CAAC,YAAM,iBAAN,IAA2B,YAAM,OAAlC,CAAL;;AARgB;AAAA;AAUhB,gBAAA,OAAO,CAAC,KAAR,GAAgB,KAAhB;AAVgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAV,WAAU;AAAA;AAAA;AAAA,OAAhB;;AAcA,WAAO;AACL,MAAA,OAAO,EAAP,OADK;AAEL,MAAA,KAAK,EAAL,KAFK;AAGL,MAAA,WAAW,EAAX;AAHK,KAAP;AAKD;AAxBY,CAAf","sourcesContent":["<template>\n  <form\n    class=\"d-flex justify-content-center mt-5 mx-3\"\n    @submit.prevent=\"handleLogin\"\n  >\n    <div class=\"\">\n      <h3 class=\"header\">Sign in to Add/Manage your listing</h3>\n      <p class=\"description\">Sign in via magic link with your email below</p>\n      <div>\n        <input\n          class=\"form-control my-2\"\n          type=\"email\"\n          placeholder=\"Your email\"\n          v-model=\"email\"\n        />\n      </div>\n      <div>\n        <input\n          type=\"submit\"\n          class=\"btn btn-primary float-end my-2\"\n          :value=\"loading ? 'Loading' : 'Send Magic link'\"\n          :disabled=\"loading\"\n        />\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { supabase } from \"../supabase\";\nimport router from \"../router/router\";\n\nexport default {\n  setup() {\n    const loading = ref(false);\n    const email = ref(\"\");\n\n    const handleLogin = async () => {\n      try {\n        loading.value = true;\n        const { error } = await supabase.auth.signIn({ email: email.value });\n        if (error) throw error;\n        alert(\"Check your email for the login link!\");\n        router.push({ path: \"login\" });\n      } catch (error) {\n        alert(error.error_description || error.message);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    return {\n      loading,\n      email,\n      handleLogin,\n    };\n  },\n};\n</script>"],"sourceRoot":""}]}