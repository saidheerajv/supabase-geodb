{"remainingRequest":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/thread-loader/dist/cjs.js!/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/babel-loader/lib/index.js!/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/src/components/GetLocations.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/src/components/GetLocations.vue","mtime":1633470727607},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/node_modules/vue-loader-v16/dist/index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2RoZWVyYWovRGVza3RvcC9zdXBhL3N1cGFiYXNlLWdlb2RiL3NiZ2VvZGIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAiLi4vc3VwYWJhc2UiOwppbXBvcnQgTG9jYXRpb25DYXJkIGZyb20gIi4vTG9jYXRpb25DYXJkLnZ1ZSI7CnZhciBhbGxUb2RvcyA9IFtdOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkdldExvY2F0aW9ucyIsCiAgY29tcG9uZW50czogewogICAgTG9jYXRpb25DYXJkOiBMb2NhdGlvbkNhcmQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYXZpZ2F0b3JFcnJvcjogZmFsc2UsCiAgICAgIGNvb3Jkczoge30sCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgcmFkaWk6IDIwCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHsKICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbih0aGlzLnNob3dQb3NpdGlvbik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiR2VvbG9jYXRpb24gaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuIik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByYWRpdXNDaGFuZ2U6IGZ1bmN0aW9uIHJhZGl1c0NoYW5nZSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5yYWRpaSk7CiAgICAgIHRoaXMuZ2V0TG9jYXRpb25zKHRoaXMuY29vcmRzLCB0aGlzLnJhZGlpKTsKICAgIH0sCiAgICBzaG93UG9zaXRpb246IGZ1bmN0aW9uIHNob3dQb3NpdGlvbihwb3NpdGlvbikgewogICAgICB0aGlzLmNvb3JkcyA9IHBvc2l0aW9uLmNvb3JkczsKICAgICAgdGhpcy5nZXRMb2NhdGlvbnModGhpcy5jb29yZHMsIDEwMCk7CiAgICB9LAogICAgZ2V0TG9jYXRpb25zOiBmdW5jdGlvbiBnZXRMb2NhdGlvbnMocG9zaXRpb24pIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsCiAgICAgICAgICBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByYWRpdXMsIF95aWVsZCRzdXBhYmFzZSRycGMsIHRvZG9zLCBlcnJvcjsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmFkaXVzID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiAxMDA7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwb3NpdGlvbiwgcmFkaXVzKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGFiYXNlLnJwYygiZ2V0X2FsbF9sb2NhdGlvbnMiLCB7CiAgICAgICAgICAgICAgICAgIHJhZGl1czogcmFkaXVzLAogICAgICAgICAgICAgICAgICBwb2ludDogIlNSSUQ9NDMyNjtQT0lOVCgiICsgcG9zaXRpb24ubGF0aXR1ZGUgKyAiICIgKyBwb3NpdGlvbi5sb25naXR1ZGUgKyAiKSIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfeWllbGQkc3VwYWJhc2UkcnBjID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHRvZG9zID0gX3lpZWxkJHN1cGFiYXNlJHJwYy5kYXRhOwogICAgICAgICAgICAgICAgZXJyb3IgPSBfeWllbGQkc3VwYWJhc2UkcnBjLmVycm9yOwoKICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IiLCBlcnJvcik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGlmICghKHRvZG9zID09PSBudWxsKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFsbFRvZG9zLnZhbHVlID0gW107CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF90aGlzLml0ZW1zID0gdG9kb3M7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5pdGVtcyk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/dheeraj/Desktop/supa/supabase-geodb/sbgeodb/src/components/GetLocations.vue"],"names":[],"mappings":";;AAuBA,SAAS,QAAT,QAAyB,aAAzB;AACA,OAAO,YAAP,MAAyB,oBAAzB;AAEA,IAAM,QAAO,GAAI,EAAjB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,cADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,YAAY,EAAZ;AADU,GAFC;AAKb,EAAA,IALa,kBAKN;AACL,WAAO;AACL,MAAA,cAAc,EAAE,KADX;AAEL,MAAA,MAAM,EAAE,EAFH;AAGL,MAAA,KAAK,EAAE,EAHF;AAIL,MAAA,KAAK,EAAE;AAJF,KAAP;AAMD,GAZY;AAab,EAAA,OAba,qBAaH;AACR,QAAI,SAAS,CAAC,WAAd,EAA2B;AACzB,MAAA,SAAS,CAAC,WAAV,CAAsB,kBAAtB,CAAyC,KAAK,YAA9C;AACF,KAFA,MAEO;AACL,MAAA,OAAO,CAAC,GAAR,CAAY,+CAAZ;AACF;AACD,GAnBY;AAqBb,EAAA,OAAO,EAAE;AACP,IAAA,YADO,0BACQ;AACb,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,KAAjB;AACA,WAAK,YAAL,CAAkB,KAAK,MAAvB,EAA+B,KAAK,KAApC;AACD,KAJM;AAKP,IAAA,YALO,wBAKM,QALN,EAKgB;AACrB,WAAK,MAAL,GAAc,QAAQ,CAAC,MAAvB;AACA,WAAK,YAAL,CAAkB,KAAK,MAAvB,EAA+B,GAA/B;AACD,KARM;AASD,IAAA,YATC,wBASY,QATZ,EASoC;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAd,gBAAA,MAAc,0EAAL,GAAK;AACzC,gBAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,EAAsB,MAAtB;AADyC;AAAA,uBAEJ,QAAQ,CAAC,GAAT,CAAa,mBAAb,EAAkC;AACrE,kBAAA,MAAM,EAAE,MAD6D;AAErE,kBAAA,KAAK,EACH,qBACA,QAAQ,CAAC,QADT,GAEA,GAFA,GAGA,QAAQ,CAAC,SAHT,GAIA;AAPmE,iBAAlC,CAFI;;AAAA;AAAA;AAE3B,gBAAA,KAF2B,uBAEjC,IAFiC;AAEpB,gBAAA,KAFoB,uBAEpB,KAFoB;;AAAA,qBAWrC,KAXqC;AAAA;AAAA;AAAA;;AAYvC,gBAAA,OAAO,CAAC,GAAR,CAAY,OAAZ,EAAqB,KAArB;AAZuC;;AAAA;AAAA,sBAgBrC,KAAI,KAAM,IAhB2B;AAAA;AAAA;AAAA;;AAiBvC,gBAAA,QAAQ,CAAC,KAAT,GAAiB,EAAjB;AAjBuC;;AAAA;AAoBzC,gBAAA,KAAI,CAAC,KAAL,GAAa,KAAb;AACA,gBAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,KAAjB;;AArByC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsB1C;AA/BM;AArBI,CAAf","sourcesContent":["<template>\n  <div class=\"my-1\">\n    <p>Current Location : {{ coords.latitude }}, {{ coords.longitude }}</p>\n    <input type=\"text\" class=\"form-control my-3\" placeholder=\"Search\" />\n    <label class=\"float-end\"> {{ radii }}</label>\n    <input\n      type=\"range\"\n      class=\"form-range\"\n      min=\"2\"\n      max=\"100\"\n      step=\"10\"\n      id=\"kmsRange\"\n      v-model=\"radii\"\n      @change=\"radiusChange\"\n    />\n    <hr />\n    <div v-for=\"item in items\" :key=\"item.id\">\n      <LocationCard :loc=\"item\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { supabase } from \"../supabase\";\nimport LocationCard from \"./LocationCard.vue\";\n\nconst allTodos = [];\n\nexport default {\n  name: \"GetLocations\",\n  components: {\n    LocationCard,\n  },\n  data() {\n    return {\n      navigatorError: false,\n      coords: {},\n      items: [],\n      radii: 20,\n    };\n  },\n  created() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(this.showPosition);\n    } else {\n      console.log(\"Geolocation is not supported by this browser.\");\n    }\n  },\n\n  methods: {\n    radiusChange() {\n      console.log(this.radii);\n      this.getLocations(this.coords, this.radii);\n    },\n    showPosition(position) {\n      this.coords = position.coords;\n      this.getLocations(this.coords, 100);\n    },\n    async getLocations(position, radius = 100) {\n      console.log(position, radius);\n      const { data: todos, error } = await supabase.rpc(\"get_all_locations\", {\n        radius: radius,\n        point:\n          \"SRID=4326;POINT(\" +\n          position.latitude +\n          \" \" +\n          position.longitude +\n          \")\",\n      });\n      if (error) {\n        console.log(\"error\", error);\n        return;\n      }\n      // handle for when no todos are returned\n      if (todos === null) {\n        allTodos.value = [];\n        return;\n      }\n      this.items = todos;\n      console.log(this.items);\n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>\n"],"sourceRoot":""}]}